{% extends "base.html" %}

{% block title %}{{ article.title }}{% endblock %}
{% block page_url %}{{ article.url }}{% endblock %}
{% block description %}{{ article.summary|striptags }}{% endblock %}
{% block social_image %}{{ article.featured }}{% endblock %}

{% block meta_other %}
	{% for tag in article.tags %}
		<meta name="tags" content="{{ tag }}" />
	{% endfor %}
	{% for author in article.authors %}
		<meta name="author" content="{{ author }}" />
	{% endfor %}
	{% for keyword in article.keywords %}
		<meta name="keywords" content="{{ keyword }}" />
	{% endfor %}

	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "Article",
			"name": "{{ article.title|striptags }}",
			"headline": "{{ article.title|striptags }}",
			"datePublished": "{{ article.date }}",
			"dateModified": "{{ article.modified }}",
			"author": {
				"@type": "Person",
				"name": "{{ article.author.name }}",
				"url": "{{ SITEURL }}/{{ article.author.url }}"
			},
			"image": "{{ article.featured }}",
			"url": "{{ SITEURL }}/{{ article.url }}",
			"description": "{{ article.summary|striptags }}",
			"publisher": {
				"name": "{{ SITENAME }}",
				"@type": "Organization",
				"logo": {
					"@type": "ImageObject",
					"url": "{{ SITEURL }}/{{ THEME_STATIC_DIR }}/images/favicon.png",
					"width": 400,
					"height": 400
				}
			}
		}
	</script>
{% endblock %}

{% block twitter_card %}summary_large_image{% endblock %}
{% block twitter_other %}
	{% for author in article.authors if author.name in AUTHORS and AUTHORS[author.name].twitter %}
		<meta name="twitter:creator" content="@{{ AUTHORS[author.name].twitter }}" />
	{% endfor %}
{% endblock %}

{% block og_type %}article{% endblock %}
{% block og_other %}
	<meta property="article:published_time" content="{{ article.date }}" />
	<meta property="article:modified_time" content="{{ article.metadata.modified }}" />
	<meta property="og:updated_time" content="{{ article.metadata.modified }}" />
	<meta property="article:section" content="{{ article.category }}" />
	{% for category in article.subcategories.__str__().split(',') %}
		<meta property="article:section" content="{{ category.strip() }}" />
	{% endfor %}
	{% for author in article.authors if author.name in AUTHORS and AUTHORS[author.name].facebook %}
		<meta property="article:author" content="https://www.facebook.com/{{ AUTHORS[author.name].facebook }}" />
	{% endfor %}
{% endblock %}

{% block content %}
	<article>
		{{ article.content }}
	</article>
{% endblock %}
